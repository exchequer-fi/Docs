<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Exchequer Finance Documentation</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Exchequer Finance Documentation">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

  <!-- Inter + JetBrains Mono -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <!-- Docsify base theme -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">

  <style>
    /* ── Light theme ── */
    :root {
      --theme-color: #522D80;
      --sidebar-nav-link-color: #374151;
      --sidebar-nav-link-color--active: #522D80;
      --sidebar-nav-link-font-weight--active: 600;

      --doc-bg: #ffffff;
      --doc-text: #374151;
      --doc-heading: #111827;
      --doc-link: #2563EB;
      --doc-sidebar-bg: #fafafa;
      --doc-sidebar-border: #f0f0f0;
      --doc-code-bg: #f6f8fa;
      --doc-code-text: #1f2937;
      --doc-border: #e5e7eb;
      --doc-muted: #6b7280;
      --doc-table-head-bg: #f9fafb;
    }

    /* ── Dark theme ── */
    html[data-theme="dark"] {
      --theme-color: #a78bfa;
      --sidebar-nav-link-color: #d1d5db;
      --sidebar-nav-link-color--active: #a78bfa;

      --doc-bg: #0d1117;
      --doc-text: #d1d5db;
      --doc-heading: #f0f6fc;
      --doc-link: #a78bfa;
      --doc-sidebar-bg: #010409;
      --doc-sidebar-border: #21262d;
      --doc-code-bg: #161b22;
      --doc-code-text: #d1d5db;
      --doc-border: #21262d;
      --doc-muted: #8b949e;
      --doc-table-head-bg: #161b22;
    }

    /* ── Base ── */
    * { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--doc-bg);
      color: var(--doc-text);
      transition: background 0.2s, color 0.2s;
    }

    /* ── Sidebar ── */
    .sidebar {
      background: var(--doc-sidebar-bg) !important;
      border-right: 1px solid var(--doc-sidebar-border) !important;
      transition: background 0.2s;
    }

    .sidebar .app-name-link img { max-width: 130px; margin: 12px 0 4px; }
    .sidebar-nav { font-size: 14px; line-height: 1.5; }
    body .sidebar-nav li a { color: var(--sidebar-nav-link-color); transition: color 0.15s; }
    body .sidebar-nav li a:hover,
    body .sidebar-nav li a.active { color: var(--sidebar-nav-link-color--active); }

    .sidebar .search input {
      font-family: 'Inter', sans-serif !important;
      font-size: 14px !important;
      background: var(--doc-bg) !important;
      color: var(--doc-text) !important;
      border: 1px solid var(--doc-border) !important;
      border-radius: 6px !important;
      padding: 8px 12px !important;
    }
    .sidebar .search input:focus { border-color: var(--theme-color) !important; outline: none; }
    .sidebar .search .matching-post { border-bottom: 1px solid var(--doc-border) !important; }
    .sidebar .search .matching-post p { color: var(--doc-text) !important; }

    /* ── Content area ── */
    .content, .markdown-section {
      background: var(--doc-bg) !important;
      color: var(--doc-text) !important;
      transition: background 0.2s, color 0.2s;
    }

    .markdown-section {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-size: 16px;
      line-height: 1.75;
      max-width: 800px;
      padding: 32px 40px 48px !important;
    }

    /* ── Headings – clean, no bottom borders ── */
    .markdown-section h1,
    .markdown-section h2,
    .markdown-section h3,
    .markdown-section h4 {
      font-family: 'Inter', sans-serif;
      color: var(--doc-heading) !important;
      line-height: 1.35;
      letter-spacing: -0.01em;
    }

    .markdown-section h1 {
      font-size: 1.875rem;
      font-weight: 700;
      margin: 0 0 1.5rem;
      border-bottom: none !important;
    }

    .markdown-section h2 {
      font-size: 1.375rem;
      font-weight: 600;
      margin: 2.5rem 0 0.75rem;
      border-bottom: none !important;
    }

    .markdown-section h3 {
      font-size: 1.125rem;
      font-weight: 600;
      margin: 2rem 0 0.5rem;
    }

    .markdown-section h4 {
      font-size: 1rem;
      font-weight: 600;
      margin: 1.5rem 0 0.5rem;
    }

    /* ── Paragraphs ── */
    .markdown-section p {
      margin: 0 0 1.25rem;
    }

    /* ── Links ── */
    .markdown-section a { color: var(--doc-link) !important; text-decoration: none; }
    .markdown-section a:hover { text-decoration: underline; }

    /* ── Bold text stays body color ── */
    .markdown-section strong { font-weight: 600; color: var(--doc-heading) !important; }

    /* ── Lists ── */
    .markdown-section ul, .markdown-section ol { padding-left: 1.5em; margin: 0 0 1.25rem; }
    .markdown-section li { margin: 0.35em 0; line-height: 1.75; }

    /* ── Inline code ── */
    .markdown-section code {
      font-family: 'JetBrains Mono', 'Menlo', 'Consolas', monospace !important;
      font-size: 0.85em !important;
      background: var(--doc-code-bg) !important;
      color: var(--doc-code-text) !important;
      border: none !important;
      border-radius: 4px !important;
      padding: 0.2em 0.4em !important;
    }

    /* ── Code blocks ── */
    .markdown-section pre {
      background: var(--doc-code-bg) !important;
      border: 1px solid var(--doc-border) !important;
      border-radius: 6px !important;
      padding: 16px 20px !important;
      margin: 1.25rem 0 !important;
      line-height: 1.55;
    }

    .markdown-section pre > code {
      font-family: 'JetBrains Mono', 'Menlo', 'Consolas', monospace !important;
      font-size: 0.85em !important;
      background: transparent !important;
      border: none !important;
      padding: 0 !important;
      color: var(--doc-code-text) !important;
    }

    /* ── Blockquotes ── */
    .markdown-section blockquote {
      border-left: 3px solid var(--doc-border) !important;
      color: var(--doc-muted) !important;
      padding: 0.5em 1em !important;
      margin: 1.25rem 0 !important;
    }
    .markdown-section blockquote p { margin: 0 !important; }

    /* ── Tables ── */
    .markdown-section table { width: 100%; margin: 1.25rem 0; font-size: 14px; }
    .markdown-section table th {
      background: var(--doc-table-head-bg) !important;
      font-weight: 600;
      text-align: left;
      padding: 10px 14px !important;
      border-bottom: 1px solid var(--doc-border) !important;
      color: var(--doc-heading) !important;
    }
    .markdown-section table td {
      padding: 10px 14px !important;
      border-bottom: 1px solid var(--doc-border) !important;
      color: var(--doc-text) !important;
    }
    .markdown-section table th, .markdown-section table td {
      border-right: none !important;
    }

    /* ── HR ── */
    .markdown-section hr { border: none !important; height: 1px; background: var(--doc-border); margin: 2rem 0 !important; }

    /* ── Images ── */
    .markdown-section img { max-width: 100%; border-radius: 4px; }

    /* ── Pagination ── */
    .docsify-pagination-container { border-top: 1px solid var(--doc-border) !important; margin-top: 2rem; }
    .pagination-item-label, .pagination-item-title { color: var(--doc-text) !important; }

    /* ── Copy button ── */
    .docsify-copy-code-button {
      font-size: 12px !important;
      color: var(--doc-muted) !important;
    }

    /* ── Background ── */
    main { background: var(--doc-bg) !important; }

    /* ── Theme toggle ── */
    .theme-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 99;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 1px solid var(--doc-border);
      background: var(--doc-bg);
      color: var(--doc-muted);
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }
    .theme-toggle:hover { border-color: var(--theme-color); color: var(--theme-color); }

    /* ── Dark overrides for Docsify internals ── */
    html[data-theme="dark"] .sidebar-toggle { background: var(--doc-sidebar-bg); }
    html[data-theme="dark"] .sidebar-toggle span { background-color: var(--doc-text); }
    html[data-theme="dark"] .docsify-copy-code-button { color: var(--doc-muted) !important; }
    html[data-theme="dark"] .app-name-link { color: var(--doc-text); }
    html[data-theme="dark"] .github-corner svg { fill: var(--theme-color); }
    .github-corner svg { fill: var(--theme-color); }

    /* ── Dark mode: comprehensive text color overrides ──
         The vue.css base theme hard-codes light-mode colors on many
         elements. We must override them all for dark readability. ── */
    html[data-theme="dark"] body,
    html[data-theme="dark"] .content,
    html[data-theme="dark"] .markdown-section,
    html[data-theme="dark"] .markdown-section p,
    html[data-theme="dark"] .markdown-section li,
    html[data-theme="dark"] .markdown-section td,
    html[data-theme="dark"] .markdown-section span,
    html[data-theme="dark"] .markdown-section div {
      color: #c9d1d9 !important;
    }

    html[data-theme="dark"] .markdown-section h1,
    html[data-theme="dark"] .markdown-section h2,
    html[data-theme="dark"] .markdown-section h3,
    html[data-theme="dark"] .markdown-section h4,
    html[data-theme="dark"] .markdown-section h5,
    html[data-theme="dark"] .markdown-section h6,
    html[data-theme="dark"] .markdown-section th,
    html[data-theme="dark"] .markdown-section strong {
      color: #f0f6fc !important;
    }

    html[data-theme="dark"] .markdown-section a {
      color: #a78bfa !important;
    }

    html[data-theme="dark"] .markdown-section blockquote,
    html[data-theme="dark"] .markdown-section blockquote p {
      color: #8b949e !important;
    }

    html[data-theme="dark"] .markdown-section code {
      color: #c9d1d9 !important;
      background: #161b22 !important;
    }

    html[data-theme="dark"] .markdown-section pre {
      background: #161b22 !important;
      border-color: #21262d !important;
    }

    html[data-theme="dark"] .markdown-section pre code {
      color: #c9d1d9 !important;
      background: transparent !important;
    }

    html[data-theme="dark"] .markdown-section table {
      border-collapse: collapse;
      border: 1px solid #21262d !important;
    }
    html[data-theme="dark"] .markdown-section table th {
      background: #161b22 !important;
      color: #f0f6fc !important;
      border: 1px solid #21262d !important;
    }
    html[data-theme="dark"] .markdown-section table tr {
      background: transparent !important;
    }
    html[data-theme="dark"] .markdown-section table tr:nth-child(2n) {
      background: #161b22 !important;
    }
    html[data-theme="dark"] .markdown-section table td {
      color: #c9d1d9 !important;
      background: transparent !important;
      border: 1px solid #21262d !important;
    }

    html[data-theme="dark"] .markdown-section hr {
      background: #21262d !important;
    }

    html[data-theme="dark"] .markdown-section em {
      color: #c9d1d9 !important;
    }

    /* Sidebar text in dark mode */
    html[data-theme="dark"] .sidebar-nav,
    html[data-theme="dark"] .sidebar-nav li,
    html[data-theme="dark"] .sidebar-nav li > p,
    html[data-theme="dark"] .sidebar-nav > ul > li > p {
      color: #8b949e !important;
      font-weight: 600;
    }
    html[data-theme="dark"] .sidebar-nav li a {
      color: #c9d1d9 !important;
    }
    html[data-theme="dark"] .sidebar-nav li a:hover,
    html[data-theme="dark"] .sidebar-nav li a.active {
      color: #a78bfa !important;
    }

    /* ── Sidebar: keep all sections expanded (no accordion) ── */
    .sidebar-nav li ul,
    .sidebar-nav li.collapse > ul,
    .sidebar-nav .app-sub-sidebar {
      display: block !important;
      overflow: visible !important;
      height: auto !important;
      max-height: none !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    /* ── Responsive ── */
    @media (max-width: 768px) {
      .markdown-section { padding: 20px 16px 32px !important; font-size: 15px; }
      .theme-toggle { bottom: 14px; right: 14px; }
    }
  </style>

  <script>
    (function() {
      var theme = localStorage.getItem('exfi_theme') || 'dark';
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>
</head>
<body>
  <div id="app"></div>
  <button class="theme-toggle" id="theme-toggle" title="Toggle dark mode"></button>

  <script>
    window.$docsify = {
      name: '<img src="https://www.exchequer.fi/images/exchequer_logo.png" alt="Exchequer Finance" style="max-width:130px">',
      repo: 'https://github.com/exchequer-fi/Docs',
      loadSidebar: true,
      subMaxLevel: 3,
      auto2top: true,
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: 'Search documentation…',
        noData: 'No results found',
        depth: 6,
        hideOtherSidebarContent: false
      },
      copyCode: {
        buttonText: 'Copy',
        errorText: 'Error',
        successText: 'Copied'
      },
      pagination: {
        previousText: 'Previous',
        nextText: 'Next',
        crossChapter: true,
        crossChapterText: true
      },
      plugins: [
        function sidebarExpandPlugin(hook) {
          function expandAll() {
            var lists = document.querySelectorAll('.sidebar-nav li ul, .sidebar-nav .app-sub-sidebar');
            for (var i = 0; i < lists.length; i++) {
              lists[i].style.display = 'block';
            }
            var items = document.querySelectorAll('.sidebar-nav li');
            for (var j = 0; j < items.length; j++) {
              items[j].classList.add('open');
              items[j].classList.remove('collapse');
            }
          }

          hook.doneEach(function() {
            expandAll();
            setTimeout(expandAll, 50);
            setTimeout(expandAll, 200);
          });

          hook.ready(function() {
            // After Docsify's own click handler collapses a section,
            // immediately re-expand everything
            var sidebar = document.querySelector('.sidebar');
            if (sidebar) {
              sidebar.addEventListener('click', function() {
                setTimeout(expandAll, 0);
                setTimeout(expandAll, 100);
                setTimeout(expandAll, 300);
              });
            }
          });
        }
      ]
    }
  </script>

  <!-- Docsify v4 -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>

  <!-- Plugins -->
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>

  <!-- Syntax highlighting -->
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-javascript.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-solidity.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-typescript.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js"></script>

  <!-- Theme toggle -->
  <script>
    (function() {
      var btn = document.getElementById('theme-toggle');
      function applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('exfi_theme', theme);
        btn.textContent = theme === 'dark' ? '\u2600' : '\u263E';
        btn.setAttribute('title', theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode');
      }
      applyTheme(localStorage.getItem('exfi_theme') || 'dark');
      btn.addEventListener('click', function() {
        var current = document.documentElement.getAttribute('data-theme');
        applyTheme(current === 'dark' ? 'light' : 'dark');
      });
    })();
  </script>
</body>
</html>
